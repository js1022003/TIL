# 클로저


* 렉시컬 스코프</br>
  - 자바스크립트 엔진은 함수를 어디서 호출했는지가 아니라 함수를 어디에 정의했는지에 따라 상위 스코프를 결정한다. 이를 렉시컬 스코프(정적 스코프)라 한다.
  - 함수를 어디서 호출하는지는 함수의 상위 스코프 어떠한 영향도 x
  - 렉시컬 환경의 "외부 렉시컬 환경에 대한 참조"에 저장할 참조값
  - 즉 상위 스코프에 대한 참조는 함수의 정의가 평가되는 시점에 함수가 정의된 환경에 의해 결정

    
* 함수 객체의 내부 슬롯 </br>
  - 함수는 자신의 내부 슬롯에 자신이 정의된 환경 즉 상위 스코프의 참조를 저장 -> 정의된 환경과 호출 환경이 다를 경우
  - 함수 객체의 내부 슬롯에 저장된 현재 실행 중인 실행 컨텍스트의 렉시컬 환경의 참조가 바로 상위 스코프


* 클로저와 렉시컬 환경
  - 클로저
    - 함수와 그 함수가 선언된 렉시컬 환경과의 조합 
    - 외부 함수보다 중첩 함수가 더 오래 유지되는 경우 중첩 함수는 이미 생명 주기가 종료한 외부 함수의 변수를 참조할 수 있는데 이러한 중첩 함수를 클로저라고 부른다.
    - 클로저는 중첩 함수가 상위 스코프의 식별자를 참조하고 있고, 외부 함수보다 더 오래 유지되는 경우에 한정
  - 자유 변수
    - 클로저에 의해 참조되는 상위 스코프의 변수
    - 클로저란 자유 변수에 묶여있는 함수라고 할 수 있다.
  - ex)
  ``` javascript 
const x = 1;

function foo() {
    const x = 10;
    bar();
};
function bar() {
    console.log(x);
}

foo(); // 1
bar(); // 1

```


* 클로저의 활용 </br>
클로저는 상태를 안전하게 변경하고 유지하기 위해 사용한다. 상태를 안전하게 은닉하고 특정 함수에게만 상태 변경을 허용


* 렉시컬 환경 </br>
렉시컬 환경은 식별자와 식별자에 바인딩된 값, 그리고 상위 스코프에 대한 참조를 기록하는 자료구조로 실행 컨텍스트를 구성하는 컴포넌트다. </br>
